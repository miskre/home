(function(){var r,t=function(e,n){return function(){return e.apply(n,arguments)}};r=function(){function e(e,n){this.onCleared=t(this.onCleared,this),this.onChanged=t(this.onChanged,this),this.element=e,this.options=$.extend(this.options,n),this.bind()}return e.prototype.element=null,e.prototype.options={fileInputSelector:"> input[type=file]",clearButtonSelector:"+ a.image-picker-cancel",onChanged:null,onCleared:null},e.prototype.onChanged=function(e){var n,t,o;if((n=e.target).files&&n.files[0]&&((t=new FileReader).onload=(o=this,function(e){return $(o.element).css("background-image","url("+e.target.result+")").addClass("removable")}),t.readAsDataURL(n.files[0]),"function"==typeof this.options.onChanged))return this.options.onChanged(e)},e.prototype.onCleared=function(e){var n;if(e.preventDefault(),null==(n=$(this.element).attr("data-no-image"))&&(n="none"),$(this.element).css("background-image",n).removeClass("removable"),"function"==typeof this.options.onCleared)return this.options.onCleared(e)},e.prototype.bind=function(){return $(this.element).find(this.options.fileInputSelector).unbind("change").change(this.onChanged).end().find(this.options.clearButtonSelector).unbind("click").click(this.onCleared).end()},e}(),"undefined"!=typeof $&&null!==$&&($.fn.giaImagePicker=function(e){var n,t,o,i;for(i=[],t=0,o=this.length;t<o;t++)n=this[t],i.push(new r(n,e));return i})}).call(this);